<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khalij Mine</title>
  <style>
    body {font-family: Tahoma, sans-serif; margin:0; padding:0; background:#111; color:#eee;}
    header {background:#222; padding:10px; text-align:center; position:sticky; top:0;}
    header h1 {margin:5px 0; color:#6cf;}
    nav a {margin:0 10px; color:#fff; text-decoration:none; font-weight:bold;}
    nav a:hover {color:#6cf;}
    section {display:none; padding:20px;}
    section.active {display:block;}
    .card {background:#222; padding:15px; margin:10px 0; border-radius:10px; box-shadow:0 0 5px #000;}
    .btn {display:inline-block; padding:8px 12px; background:#6cf; color:#000; border-radius:6px; margin-top:5px; cursor:pointer; font-weight:bold;}
    .btn:disabled {background:#555; cursor:not-allowed; color:#aaa;}
    .countdown {font-size:1.2em; margin:10px 0;}
    .admin-table, .player-table {width:100%; border-collapse:collapse; margin-top:10px;}
    .admin-table th, .admin-table td, .player-table th, .player-table td {border:1px solid #555; padding:6px; text-align:center;}
    .shop-item {margin:10px 0;}
    .profile {margin:10px 0; padding:10px; background:#333; border-radius:8px;}
    footer {background:#222; text-align:center; padding:10px; margin-top:20px; font-size:0.9em;}
  </style>
</head>
<body>
  <header>
    <h1>ğŸŒ Khalij Mine</h1>
    <nav>
      <a href="#" onclick="showSection('home')">Ø®Ø§Ù†Ù‡</a>
      <a href="#" onclick="showSection('rules')">Ù‚ÙˆØ§Ù†ÛŒÙ†</a>
      <a href="#" onclick="showSection('shop')">ÙØ±ÙˆØ´Ú¯Ø§Ù‡</a>
      <a href="#" onclick="showSection('team')">ØªÛŒÙ… Ù…Ø¯ÛŒØ±ÛŒØª</a>
      <a href="#" onclick="showSection('top')">Ø¨Ø±ØªØ±ÛŒÙ†â€ŒÙ‡Ø§</a>
      <a href="#" onclick="showSection('login')">ÙˆØ±ÙˆØ¯</a>
    </nav>
  </header>

  <!-- Ø®Ø§Ù†Ù‡ -->
  <section id="home" class="active">
    <div class="card">
      <h2>Ø¨Ù‡ Ø³Ø±ÙˆØ± Khalij Mine Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</h2>
      <p>ğŸŒŸ Ø³Ø±ÙˆØ±ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù…Ø§ÛŒÙ†Ú©Ø±Ø§ÙØª Ø¨Ø§ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ØŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø±Ù†Ú© Ùˆ ØªÛŒÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ù‚ÙˆÛŒ.</p>
      <h3>Ø§ÛŒÙˆÙ†Øª Ø¨Ø¹Ø¯ÛŒ:</h3>
      <div id="countdown" class="countdown"></div>
      <p>â³ Ø¬Ø§ÛŒØ²Ù‡: Ø±Ù†Ú© ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ù†Ø¯Ù‡!</p>
    </div>
  </section>

  <!-- Ù‚ÙˆØ§Ù†ÛŒÙ† -->
  <section id="rules">
    <div class="card">
      <h2>ğŸ“œ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø³Ø±ÙˆØ±</h2>
      <ul>
        <li>1- ØªÙˆÙ‡ÛŒÙ† Ø¨Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† Ùˆ Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§ Ù…Ù…Ù†ÙˆØ¹ ğŸš«</li>
        <li>2- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú†ÛŒØªØ±/Ù‡Ú© Ø¨Ø§Ø¹Ø« Ø¨Ù† Ø¯Ø§Ø¦Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯ âš¡</li>
        <li>3- ÙØ±ÙˆØ´ ÛŒØ§ Ø®Ø±ÛŒØ¯ ØºÛŒØ±Ù‚Ø§Ù†ÙˆÙ†ÛŒ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ Ù…Ù…Ù†ÙˆØ¹ ğŸ’°</li>
        <li>4- Ø§Ø­ØªØ±Ø§Ù… Ø¨Ù‡ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ ØªØµÙ…ÛŒÙ…Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª âœ…</li>
      </ul>
    </div>
  </section>

  <!-- ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
  <section id="shop">
    <h2>ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø±Ù†Ú©â€ŒÙ‡Ø§</h2>
    <div id="shopItems"></div>
  </section>

  <!-- ØªÛŒÙ… Ù…Ø¯ÛŒØ±ÛŒØª -->
  <section id="team">
    <h2>ğŸ‘‘ ØªÛŒÙ… Ù…Ø¯ÛŒØ±ÛŒØª Khalij Mine</h2>
    <div class="card">SOL - Owner <br><img src="https://mineskin.eu/helm/Steve/100.png"></div>
    <div class="card">oktayparsa - Co Owner <br><img src="https://mineskin.eu/helm/Alex/100.png"></div>
    <div class="card">Amirhossein - Manager <br><img src="https://mineskin.eu/helm/Notch/100.png"></div>
    <div class="card">hossein - Builder <br><img src="https://mineskin.eu/helm/Jeb_/100.png"></div>
  </section>

  <!-- Ø¨Ø±ØªØ±ÛŒÙ†â€ŒÙ‡Ø§ -->
  <section id="top">
    <h2>ğŸ† Ø¨Ø±ØªØ±ÛŒÙ† Ù¾Ù„ÛŒØ±Ù‡Ø§</h2>
    <table class="player-table" id="topPlayers">
      <tr><th>Ù†Ø§Ù…</th><th>ØªØ§ÛŒÙ… Ù¾Ù„ÛŒ (Ø³Ø§Ø¹Øª)</th></tr>
    </table>
  </section>

  <!-- ÙˆØ±ÙˆØ¯ -->
  <section id="login">
    <h2>ğŸ”‘ ÙˆØ±ÙˆØ¯</h2>
    <input id="loginUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"><br><br>
    <input id="loginPass" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"><br><br>
    <button class="btn" onclick="login()">ÙˆØ±ÙˆØ¯</button>
    <div id="loginMsg"></div>
  </section>

  <!-- Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø± -->
  <section id="userPanel">
    <h2>ğŸ® Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±</h2>
    <div id="userProfile" class="profile"></div>
    <button class="btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
  </section>

  <!-- Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† -->
  <section id="adminPanel">
    <h2>âš™ï¸ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
    <button class="btn" onclick="showAddUser()">â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±</button>
    <div id="addUserForm" style="display:none;">
      <input id="newUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±">
      <input id="newPass" placeholder="Ø±Ù…Ø²">
      <button class="btn" onclick="addUser()">Ø«Ø¨Øª</button>
    </div>
    <h3>Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†:</h3>
    <table class="admin-table" id="usersTable"></table>
    <h3>Ø®Ø±ÛŒØ¯Ù‡Ø§:</h3>
    <div id="orders"></div>
    <button class="btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
  </section>

  <footer>
    ğŸ“¢ Ú©Ø§Ù†Ø§Ù„ Ø±ÙˆØ¨ÛŒÚ©Ø§: <b>@khalij_mine</b>
  </footer>

<script>
let currentUser = null;
let users = JSON.parse(localStorage.getItem("users")) || [
  {username:"player1",password:"123",coins:200,time:50,rank:null,rank_expiry:null}
];
let admins = [{username:"admin",password:"admin123"}];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

function saveData(){ localStorage.setItem("users",JSON.stringify(users)); localStorage.setItem("orders",JSON.stringify(orders)); }

function showSection(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(id==="shop") renderShop();
  if(id==="top") renderTop();
  if(id==="adminPanel") renderAdmin();
  if(id==="userPanel") renderProfile();
}

function login(){
  let u=document.getElementById("loginUser").value;
  let p=document.getElementById("loginPass").value;
  let user=users.find(x=>x.username===u && x.password===p);
  if(user){ currentUser=user; showSection("userPanel"); return;}
  let admin=admins.find(x=>x.username===u && x.password===p);
  if(admin){ currentUser=admin; showSection("adminPanel"); return;}
  document.getElementById("loginMsg").innerText="âŒ ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…ÙˆÙÙ‚";
}

function logout(){ currentUser=null; showSection("home"); }

function showAddUser(){document.getElementById("addUserForm").style.display="block";}
function addUser(){
  let u=document.getElementById("newUser").value;
  let p=document.getElementById("newPass").value;
  users.push({username:u,password:p,coins:0,time:0,rank:null,rank_expiry:null});
  saveData(); renderAdmin();
}

function renderAdmin(){
  let tbl="<tr><th>Ù†Ø§Ù…</th><th>Ø³Ú©Ù‡</th><th>Ø±Ù†Ú©</th><th>Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒ</th></tr>";
  users.forEach(u=>{
    let daysLeft = u.rank_expiry? Math.max(0, Math.ceil((new Date(u.rank_expiry)-Date.now())/86400000)):0;
    tbl+=`<tr><td>${u.username}</td><td>${u.coins}</td><td>${u.rank||"-"}</td><td>${daysLeft}</td></tr>`;
  });
  document.getElementById("usersTable").innerHTML=tbl;
  document.getElementById("orders").innerHTML=orders.map(o=>`<div>${o}</div>`).join("");
}

function renderShop(){
  let html="";
  let shopItems=[{id:"r1",name:"VIP",price:100},{id:"r2",name:"CIP",price:200},{id:"r3",name:"Helper",price:300}];
  shopItems.forEach(i=>{
    let disabled=false, msg="";
    if(currentUser && currentUser.rank && currentUser.rank_expiry && new Date(currentUser.rank_expiry)>Date.now()){
      disabled=true; msg="(Ø´Ù…Ø§ Ø±Ù†Ú© ÙØ¹Ø§Ù„ Ø¯Ø§Ø±ÛŒØ¯)";
    }
    html+=`<div class='card shop-item'>${i.name} - ${i.price} Ø³Ú©Ù‡<br>
      <button class='btn' ${disabled?"disabled":""} onclick="buy('${i.id}')">Ø®Ø±ÛŒØ¯</button> ${msg}</div>`;
  });
  document.getElementById("shopItems").innerHTML=html;
}

function buy(id){
  let item={r1:"VIP",r2:"CIP",r3:"Helper"}[id];
  let price={r1:100,r2:200,r3:300}[id];
  if(!currentUser) return alert("Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯");
  if(currentUser.coins<price) return alert("Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª");
  currentUser.coins-=price;
  currentUser.rank=item;
  currentUser.rank_expiry=new Date(Date.now()+30*24*60*60*1000);
  orders.push(currentUser.username+" Ø®Ø±ÛŒØ¯ "+item);
  saveData();
  alert("âœ… Ø®Ø±ÛŒØ¯ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯");
  renderShop(); renderProfile();
}

function renderProfile(){
  if(!currentUser) return;
  let daysLeft=currentUser.rank_expiry? Math.max(0,Math.ceil((new Date(currentUser.rank_expiry)-Date.now())/86400000)):0;
  document.getElementById("userProfile").innerHTML=
    `<b>Ù†Ø§Ù…:</b> ${currentUser.username}<br>
     <b>Ø³Ú©Ù‡:</b> ${currentUser.coins}<br>
     <b>Ø±Ù†Ú©:</b> ${currentUser.rank||"-"} (${daysLeft} Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒ)`;
}

function renderTop(){
  let tbl="<tr><th>Ù†Ø§Ù…</th><th>ØªØ§ÛŒÙ… Ù¾Ù„ÛŒ</th></tr>";
  users.sort((a,b)=>b.time-a.time).slice(0,5).forEach(u=>{
    tbl+=`<tr><td>${u.username}</td><td>${u.time}</td></tr>`;
  });
  document.getElementById("topPlayers").innerHTML=tbl;
}

function countdown(){
  let ev=new Date(Date.now()+6*24*60*60*1000);
  setInterval(()=>{
    let d=ev-Date.now();
    if(d<=0){document.getElementById("countdown").innerText="Ø´Ø±ÙˆØ¹ Ø´Ø¯!";return;}
    let days=Math.floor(d/86400000), hrs=Math.floor(d/3600000)%24, mins=Math.floor(d/60000)%60, sec=Math.floor(d/1000)%60;
    document.getElementById("countdown").innerText=`${days}Ø±ÙˆØ² ${hrs}:${mins}:${sec}`;
  },1000);
}
countdown();
</script>
</body>
</html>
